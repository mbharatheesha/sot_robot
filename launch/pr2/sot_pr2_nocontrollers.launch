<?xml version="1.0"?>
<launch>
      <param name="robot_description" command="$(find xacro)/xacro.py '$(find pr2_description)/robots/pr2_no_kinect.urdf.xacro'" />

      <param name="robot_description_sot" command="$(find xacro)/xacro.py '$(find sot_robot)/robot/urdf/pr2/pr2_sot.urdf.xacro'" />

    <arg name="gui" default="False" />
    <param name="use_gui" value="$(arg gui)"/>
    <param name="robot_base_link" value="base_footprint"/>
    <!--<param name="ref_link" value="odom_combined"/>-->

    <arg name="frame" value="odom"/>
    <arg name="child_frame" value= "base_footprint"/>
<param name="ref_link" value="odom_combined"/>

  <param name="kitchen_description"
  textfile="$(find iai_maps)/urdf/table_brown.urdf"/>

  <node pkg="tf" type="static_transform_publisher"
	name="kitchen_link_broadcaster"
	args="0 0 0 0 0 0 /odom /iai_kitchen/table_top_link 200">
  </node>

  <node pkg="robot_state_chain_publisher" type="state_chain_publisher"
    name="kitchen_state_publisher" output="screen">
    <param name="tf_prefix" value="/iai_kitchen"/>
    <param name="publish_frequency" value="2"/>
    <remap from="robot_description" to="kitchen_description" />
  </node>


    <node name="robot_pose_publisher" pkg="dynamic_graph_bridge" type="robot_pose_publisher" args="_frame:=$(arg frame) _child_frame:=$(arg child_frame)">
        <env name="ROS_NAMESPACE" value="/dynamic_graph" />
    </node>

     <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher" >
	<env name="ROS_NAMESPACE" value="/dynamic_graph"/>
    </node>

</launch>

